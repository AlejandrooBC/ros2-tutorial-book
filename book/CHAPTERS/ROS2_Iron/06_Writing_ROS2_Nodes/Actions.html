
<!DOCTYPE html>


<html lang="en" data-content_root="../../../../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>5.10. Actions &#8212; A Guide to ROS2</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../../../_static/styles/theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../../../../_static/styles/bootstrap.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../../../../_static/styles/pydata-sphinx-theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />

  
  <link href="../../../../_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../../../../_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../../../_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../../../_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../../../../_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="../../../../_static/styles/sphinx-book-theme.css?v=eba8b062" />
    <link rel="stylesheet" type="text/css" href="../../../../_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="../../../../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../../../../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="../../../../_static/sphinx-thebe.css?v=4fa983c6" />
    <link rel="stylesheet" type="text/css" href="../../../../_static/sphinx-design.min.css?v=95c83b7e" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../../../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b" />
<link rel="preload" as="script" href="../../../../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b" />
  <script src="../../../../_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=dfe6caa3a7d634c4db9b"></script>

    <script src="../../../../_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="../../../../_static/doctools.js?v=9a2dae69"></script>
    <script src="../../../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../../../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../../../../_static/copybutton.js?v=f281be69"></script>
    <script src="../../../../_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../../../../_static/togglebutton.js?v=4a39c7ea"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../../../../_static/design-tabs.js?v=f930bc37"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script async="async" src="../../../../_static/sphinx-thebe.js?v=c100c467"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'book/CHAPTERS/ROS2_Iron/06_Writing_ROS2_Nodes/Actions';</script>
    <link rel="canonical" href="https://AlejandrooBC.github.io/ros2-tutorial-book/book/CHAPTERS/ROS2_Iron/06_Writing_ROS2_Nodes/Actions.html" />
    <link rel="icon" href="../../../../_static/fav.ico"/>
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" />
    <link rel="next" title="6. Launch Files" href="../07_Launch_Files/Launch_Files.html" />
    <link rel="prev" title="5.7. Services" href="Services.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../../../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search..."
         aria-label="Search..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="../../../../index.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../../../../_static/A_Guide_to_ROS2_Transparent_Logo.png" class="logo__image only-light" alt="A Guide to ROS2 - Home"/>
    <script>document.write(`<img src="../../../../_static/A_Guide_to_ROS2_Transparent_Logo.png" class="logo__image only-dark" alt="A Guide to ROS2 - Home"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Introduction and Overview</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../../INTRODUCTION/About_the_Authors.html">About the Authors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../INTRODUCTION/Preface.html">Preface</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../INTRODUCTION/Table_of_Contents.html">Table of Contents</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">ROS2 Iron</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../01_Introduction_to_ROS2/01_Introduction_to_ROS2.html">1. Introduction to ROS2</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../02_Setting_Up_an_Environment/02_Setting_Up_a_ROS2_Environment.html">2. Setting Up a ROS2 Environment</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../02_Setting_Up_an_Environment/ROS2IronInstallationWindows.html">2.7. Step 1: System Setup for Installing ROS2 Iron (Windows 10/11)</a></li>






















<li class="toctree-l2"><a class="reference internal" href="../02_Setting_Up_an_Environment/ROS2VMInstall.html">2.30. Windows 10/11 VM Instructions</a></li>











<li class="toctree-l2"><a class="reference internal" href="../02_Setting_Up_an_Environment/ROS2IronInstallationMacOS.html">2.42. Step 1: System Setup for ROS2 Iron on macOS</a></li>





<li class="toctree-l2"><a class="reference internal" href="../02_Setting_Up_an_Environment/ROS2IronInstallationUbuntu.html">2.48. Step 1: System Setup for Installing ROS2 Iron (Ubuntu 22)</a></li>








<li class="toctree-l2"><a class="reference internal" href="../02_Setting_Up_an_Environment/DockerInstallation.html">2.57. First Time Installation</a></li>


</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../03_Basic_Concepts/03_Basic_ROS2_Concepts.html">3. Basic ROS2 Concepts</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../03_Basic_Concepts/Nodes_and_Topics.html">3.1. Nodes and Topics</a></li>

<li class="toctree-l2"><a class="reference internal" href="../03_Basic_Concepts/ServicesBasicConcept.html">3.3. Services</a></li>

<li class="toctree-l2"><a class="reference internal" href="../03_Basic_Concepts/Actions.html">3.5. Actions</a></li>

<li class="toctree-l2"><a class="reference internal" href="../03_Basic_Concepts/Parameters.html">3.7. Parameters</a></li>




<li class="toctree-l2"><a class="reference internal" href="../03_Basic_Concepts/Launch_Files.html">3.12. Launch Files</a></li>


<li class="toctree-l2"><a class="reference internal" href="../03_Basic_Concepts/PublisherSubscriber.html">3.15. How to write a Publisher and Subscriber</a></li>



<li class="toctree-l2"><a class="reference internal" href="../03_Basic_Concepts/ROSBuildPkg.html">3.19. Building a Package</a></li>



<li class="toctree-l2"><a class="reference internal" href="../03_Basic_Concepts/ROSPackageTutorial.html">3.23. How to Develop a Package in ROS2</a></li>





</ul>
</details></li>
<li class="toctree-l1"><a class="reference internal" href="../04_Command_Line_Tools/Commands.html">4. ROS2 Command-Line Tools</a></li>
<li class="toctree-l1 current active has-children"><a class="reference internal" href="06_Writing_Nodes.html">5. Writing Nodes</a><details open="open"><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="Packages.html">5.1. Creating Packages</a></li>

<li class="toctree-l2"><a class="reference internal" href="PackageCommands.html">5.3. Package Commands</a></li>

<li class="toctree-l2"><a class="reference internal" href="BasicNodes.html">5.5. Basic ROS Nodes</a></li>

<li class="toctree-l2"><a class="reference internal" href="Services.html">5.7. Services</a></li>


<li class="toctree-l2 current active"><a class="current reference internal" href="#">5.10. Actions</a></li>

</ul>
</details></li>
<li class="toctree-l1"><a class="reference internal" href="../07_Launch_Files/Launch_Files.html">6. Launch Files</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">ROS1 Noetic</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../ROS1_Noetic/temp.html">Temp</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">ROS1 Melodic</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../ROS1_Melodic/temp.html">Temp</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Appendices</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../../APPENDICES/Bibliography.html">Bibliography</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-launch-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Launch interactive content">
    <i class="fas fa-rocket"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://mybinder.org/v2/gh/AlejandrooBC/ros2-tutorial-book/master?urlpath=tree/book/CHAPTERS/ROS2_Iron/06_Writing_ROS2_Nodes/Actions.ipynb" target="_blank"
   class="btn btn-sm dropdown-item"
   title="Launch on Binder"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  
    <img alt="Binder logo" src="../../../../_static/images/logo_binder.svg">
  </span>
<span class="btn__text-container">Binder</span>
</a>
</li>
      
      
      
      
      <li><a href="https://colab.research.google.com/github/AlejandrooBC/ros2-tutorial-book/blob/master/book/CHAPTERS/ROS2_Iron/06_Writing_ROS2_Nodes/Actions.ipynb" target="_blank"
   class="btn btn-sm dropdown-item"
   title="Launch on Colab"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  
    <img alt="Colab logo" src="../../../../_static/images/logo_colab.png">
  </span>
<span class="btn__text-container">Colab</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/AlejandrooBC/ros2-tutorial-book" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/AlejandrooBC/ros2-tutorial-book/edit/main/book/CHAPTERS/ROS2_Iron/06_Writing_ROS2_Nodes/Actions.ipynb" target="_blank"
   class="btn btn-sm btn-source-edit-button dropdown-item"
   title="Suggest edit"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-pencil-alt"></i>
  </span>
<span class="btn__text-container">Suggest edit</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/AlejandrooBC/ros2-tutorial-book/issues/new?title=Issue%20on%20page%20%2Fbook/CHAPTERS/ROS2_Iron/06_Writing_ROS2_Nodes/Actions.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../../../../_sources/book/CHAPTERS/ROS2_Iron/06_Writing_ROS2_Nodes/Actions.ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm pst-navbar-icon search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Actions</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#">5.10. Actions</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#topics-vs-services-vs-actions">5.10.1. Topics vs Services vs Actions</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#asynchronous-programming">5.10.2. Asynchronous Programming</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#async-methods">5.10.2.1. Async Methods</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#futures">5.10.2.2. Futures</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#programming-with-client-actions">5.10.3. Programming with Client Actions</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#send-goal">5.10.3.1. Send Goal</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#goal-handles">5.10.3.2. Goal Handles</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#status">5.10.3.2.1. Status</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#get-result">5.10.3.2.2. Get Result</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#cancel-goal">5.10.3.2.3. Cancel Goal</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#feedback">5.10.3.3. Feedback</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#review-quiz">5.11. Review Quiz</a></li>
</ul>

            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="actions">
<h1><span class="section-number">5.10. </span>Actions<a class="headerlink" href="#actions" title="Link to this heading">#</a></h1>
<p>The last type of connection that we are going to cover are Actions.</p>
<p>Actions are a combination of Services and Topics. They are initiated by calls to an action server, just like services are initiated by calls to a regular server. However, action services provide intermittent feedback by publishing to a topic that the action client can subscribe to. So, when should you use each?</p>
<section id="topics-vs-services-vs-actions">
<h2><span class="section-number">5.10.1. </span>Topics vs Services vs Actions<a class="headerlink" href="#topics-vs-services-vs-actions" title="Link to this heading">#</a></h2>
<p>Topics, services, and actions can all be used to transfer information between nodes, but they have different use cases.</p>
<p>Topics should be used for passing streams of information that are always relevant. For example, when a turtle exists in turtlesim, it is constantly publishing its current position over the <code class="docutils literal notranslate"><span class="pre">/turtle1/pose</span></code> topic, and is constantly reading a desired velocity over the <code class="docutils literal notranslate"><span class="pre">/turtle1/cmd_vel</span></code>. These topics constantly accepting and publishing data, and are valid as long as <code class="docutils literal notranslate"><span class="pre">turtle1</span></code> exists. Note that publishing to <code class="docutils literal notranslate"><span class="pre">cmd_vel</span></code>, despite only representing information, still causes the turtle to move. Topics can be used to cause something to happen.</p>
<p>Services should be used for requesting something quick to happen. The <code class="docutils literal notranslate"><span class="pre">turtlesim</span></code> node exposes several services that can be requested through service calls, like <code class="docutils literal notranslate"><span class="pre">/spawn</span></code> to spawn a turtle, or <code class="docutils literal notranslate"><span class="pre">/reset</span></code> to reset the simulation. These happen almost instantaneously, and there is no need for feedback while the server is executing the action. Services can return info, like in the case of <code class="docutils literal notranslate"><span class="pre">/spawn</span></code>, which returns the name of the created turtle.</p>
<!-- TODO this needs to be proofread. I tried very hard to not use "action", as in "something that happens" when I wasn't talking about the "Action" node connection, but I think it comes of as weird to read. -->
<p>Actions should be used for requesting something that might take a while, that would require feedback. <code class="docutils literal notranslate"><span class="pre">turtlesim</span></code> exposes one action, <code class="docutils literal notranslate"><span class="pre">turtle1/rotate_absolute</span></code>. This causes the turtle to turn to a position, but since the turtle can’t turn instantaneously, an action is used to keep the client updated on the turning progress.</p>
</section>
<section id="asynchronous-programming">
<h2><span class="section-number">5.10.2. </span>Asynchronous Programming<a class="headerlink" href="#asynchronous-programming" title="Link to this heading">#</a></h2>
<section id="async-methods">
<h3><span class="section-number">5.10.2.1. </span>Async Methods<a class="headerlink" href="#async-methods" title="Link to this heading">#</a></h3>
<p>In the services tutorial, we glossed over an important method call: <code class="docutils literal notranslate"><span class="pre">call_async()</span></code>. We used that method to <em>asynchronously</em> call our services, as opposed to using <em>synchronous</em> calls via <code class="docutils literal notranslate"><span class="pre">call()</span></code>.</p>
<p>A synchronous call is like a regular function call, where everything happens in the order you expect it to. Take this modified function from the services activity:</p>
<!-- TODO I need a better example for async vs sync calls. This one was easy to grab, but it doesn't actually illustrate anything. -->
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>    <span class="bp">self</span><span class="o">.</span><span class="n">set_pen_client</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_client</span><span class="p">(</span><span class="n">SetPen</span><span class="p">,</span> <span class="s1">&#39;/turtle1/set_pen&#39;</span><span class="p">)</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">set_pen</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">r</span><span class="p">,</span> <span class="n">g</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
        <span class="n">req</span> <span class="o">=</span> <span class="n">SetPen</span><span class="o">.</span><span class="n">Request</span><span class="p">()</span>
        <span class="c1"># Set R, G, B, and width</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">set_pen_client</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">req</span><span class="p">)</span>
</pre></div>
</div>
<p>This makes a synchronous call to the <code class="docutils literal notranslate"><span class="pre">set_pen</span></code> server from our <code class="docutils literal notranslate"><span class="pre">set_pen</span></code> client. The last line will request that the server change the pen color, and it will not move on until the service has come back and said either: “The pen color has been set,” or “The request failed.” This is called a blocking operation, since it blocks all code after it until it finishes. Compare that to the function that we actually used:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>    <span class="k">def</span><span class="w"> </span><span class="nf">set_pen</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">r</span><span class="p">,</span> <span class="n">g</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
        <span class="n">req</span> <span class="o">=</span> <span class="n">SetPen</span><span class="o">.</span><span class="n">Request</span><span class="p">()</span>
        <span class="c1"># Set R, G, B, and width</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">set_pen_client</span><span class="o">.</span><span class="n">call_async</span><span class="p">(</span><span class="n">req</span><span class="p">)</span>
</pre></div>
</div>
<p>This makes an <em>asynchronous</em> call to the <code class="docutils literal notranslate"><span class="pre">set_pen</span></code> server. The last line will request that the server sets the pen color, but it won’t actually wait for the server to confirm that the pen color has been set. This allows your code to do other things while ROS2 is busy passing messages around. This is a non-blocking operation. Importantly, synchronous calls <strong>cannot</strong> be used inside callbacks. This is because callbacks are called by ROS2, and synchronous calls are blocking. If you ask ROS2 to make a call, but then tell it not to do anything until the call is complete, ROS2 can’t complete your call and will get stuck!</p>
<p>Asynchronous calls are usually good to use, but they introduce some complexity into your program. If you need to get the result of a call, you can’t be sure that the call has actually been completed yet! This is where futures come in.</p>
</section>
<section id="futures">
<h3><span class="section-number">5.10.2.2. </span>Futures<a class="headerlink" href="#futures" title="Link to this heading">#</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">Future</span></code>s in <code class="docutils literal notranslate"><span class="pre">rclpy</span></code> represent the outcome of some task. Usually when you create or recieve a <code class="docutils literal notranslate"><span class="pre">Future</span></code>, that task is not yet done. Futures allow you to check if a task is done by calling the <code class="docutils literal notranslate"><span class="pre">done()</span></code> method, and get the result of the task using the <code class="docutils literal notranslate"><span class="pre">result()</span></code> method.</p>
<p>For services, futures will resolve to the result of the service. So, if a service called <code class="docutils literal notranslate"><span class="pre">/spawn</span></code> returns a response with<code class="docutils literal notranslate"><span class="pre">string</span> <span class="pre">name</span></code>, you can get <code class="docutils literal notranslate"><span class="pre">name</span></code> with the following line:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="bp">self</span><span class="o">.</span><span class="n">spawn_client</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_client</span><span class="p">(</span><span class="n">Spawn</span><span class="p">,</span> <span class="s1">&#39;/spawn&#39;</span><span class="p">)</span>
<span class="bp">self</span><span class="o">.</span><span class="n">spawn_future</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">spawn_client</span><span class="o">.</span><span class="n">call_async</span><span class="p">(</span><span class="n">Spawn</span><span class="o">.</span><span class="n">Request</span><span class="p">())</span>
<span class="bp">self</span><span class="o">.</span><span class="n">create_timer</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">print_name</span><span class="p">)</span>
<span class="k">def</span><span class="w"> </span><span class="nf">print_name</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">if</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">spawn_future</span><span class="o">.</span><span class="n">done</span><span class="p">()):</span>
        <span class="nb">print</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">spawn_future</span><span class="o">.</span><span class="n">result</span><span class="p">()</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
</pre></div>
</div>
<p>When <code class="docutils literal notranslate"><span class="pre">print_name()</span></code> is called, if <code class="docutils literal notranslate"><span class="pre">/spawn</span></code> has completed, it will print the name that was returned. Note that we use <code class="docutils literal notranslate"><span class="pre">create_timer</span></code> to run <code class="docutils literal notranslate"><span class="pre">print_name()</span></code> every 1 second. Alternatively, <code class="docutils literal notranslate"><span class="pre">add_done_callback</span></code> can be used to trigger a callback once, as soon as the result resolves. We don’t need to check if the future is done, since if the callback is called, we know that the future finished. In a more complex example, we might want some error checking on the future, but for simplicity we are excluding that check for now.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="bp">self</span><span class="o">.</span><span class="n">spawn_client</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_client</span><span class="p">(</span><span class="n">Spawn</span><span class="p">,</span> <span class="s1">&#39;/spawn&#39;</span><span class="p">)</span>
<span class="bp">self</span><span class="o">.</span><span class="n">spawn_future</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">spawn_client</span><span class="o">.</span><span class="n">call_async</span><span class="p">(</span><span class="n">Spawn</span><span class="o">.</span><span class="n">Request</span><span class="p">())</span>
<span class="bp">self</span><span class="o">.</span><span class="n">spawn_future</span><span class="o">.</span><span class="n">add_done_callback</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">print_name</span><span class="p">)</span>

<span class="k">def</span><span class="w"> </span><span class="nf">print_name</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">future</span><span class="p">:</span> <span class="n">Future</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">future</span><span class="o">.</span><span class="n">result</span><span class="p">()</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
</pre></div>
</div>
<p>The above examples show futures as used with services. Actions futures are similar, but have a different result type.</p>
</section>
</section>
<section id="programming-with-client-actions">
<h2><span class="section-number">5.10.3. </span>Programming with Client Actions<a class="headerlink" href="#programming-with-client-actions" title="Link to this heading">#</a></h2>
<section id="send-goal">
<h3><span class="section-number">5.10.3.1. </span>Send Goal<a class="headerlink" href="#send-goal" title="Link to this heading">#</a></h3>
<p>Like services, actions can be called both synchronously and asynchronously. However, for purposes of this tutorial, <strong>actions should almost never be called synchronously</strong>. We have established that actions are a good fit for long-running actions, and we also saw how synchronous calls were blocking calls. If we make a blocking call that takes a long time in the main loop of the node, we’re going to run into unexpected behavior! Additionally, synchronous action calls function almost identically to service calls, in that we aren’t able to make use of the feedback part of actions. We will simply have a service that takes a long time to execute. Still, for completeness, calling actions synchronously can be done like this:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="bp">self</span><span class="o">.</span><span class="n">rotate_client</span> <span class="o">=</span> <span class="n">ActionClient</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">RotateAbsolute</span><span class="p">,</span> <span class="s1">&#39;/turtle1/rotate_absolute&#39;</span><span class="p">)</span>
    
<span class="k">def</span><span class="w"> </span><span class="nf">rotate_to_goal</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">angle</span><span class="p">):</span>
    <span class="n">goal</span> <span class="o">=</span> <span class="n">RotateAbsolute</span><span class="o">.</span><span class="n">Goal</span><span class="p">()</span>
    <span class="n">goal</span><span class="o">.</span><span class="n">theta</span> <span class="o">=</span> <span class="n">angle</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">rotate_client</span><span class="o">.</span><span class="n">send_goal</span><span class="p">(</span><span class="n">goal</span><span class="p">)</span>
</pre></div>
</div>
<p>Most of the time we should call actions asynchronously. Actions can be called asynchronously like this:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">rotate_to_goal</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">angle</span><span class="p">):</span>
    <span class="n">goal</span> <span class="o">=</span> <span class="n">RotateAbsolute</span><span class="o">.</span><span class="n">Goal</span><span class="p">()</span>
    <span class="n">goal</span><span class="o">.</span><span class="n">theta</span> <span class="o">=</span> <span class="n">angle</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">rotate_client</span><span class="o">.</span><span class="n">send_goal_async</span><span class="p">(</span><span class="n">goal</span><span class="p">)</span>
</pre></div>
</div>
<p>Like with sevices, this function will return a <code class="docutils literal notranslate"><span class="pre">Future</span></code>. However, getting feedback and the final result is a little more complicated.</p>
<p>Actions operate in 4 stages:</p>
<ol class="arabic simple">
<li><p>We, the action client, make a request to the action server. At this point, the future is not done, and the result is <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p></li>
<li><p>The action server recieves and processes our request, and responds. At this point, the future is done, and the result is a <code class="docutils literal notranslate"><span class="pre">GoalHandle</span></code> with an <code class="docutils literal notranslate"><span class="pre">Accepted</span></code> or <code class="docutils literal notranslate"><span class="pre">Executing</span></code> status.</p></li>
<li><p>The action server periodically sends feedback to our action client if we gave it a callback function. At this point, the future is done and the result is a <code class="docutils literal notranslate"><span class="pre">GoalHandle</span></code> with an <code class="docutils literal notranslate"><span class="pre">Accepted</span></code> or <code class="docutils literal notranslate"><span class="pre">Executing</span></code> status.</p></li>
<li><p>The action server finishes the action. At this point, the future is done and the result is a <code class="docutils literal notranslate"><span class="pre">GoalHandle</span></code> with the <code class="docutils literal notranslate"><span class="pre">Succeeded</span></code> status.</p></li>
</ol>
<p>You may have noticed that the future finished at step 2! As a reminder, with services we were able to use the results right after our future finished. With actions, the future only tells us whether or not the server has accepted our request, not if it is done or not. That means once we have our <code class="docutils literal notranslate"><span class="pre">GoalHandle</span></code>, we need to use that to determine if our action has finished or not.</p>
</section>
<section id="goal-handles">
<h3><span class="section-number">5.10.3.2. </span>Goal Handles<a class="headerlink" href="#goal-handles" title="Link to this heading">#</a></h3>
<p>Goal handles are resources we can use to interact with the action while it is executing. Goal handles have the following important properties:</p>
<section id="status">
<h4><span class="section-number">5.10.3.2.1. </span>Status<a class="headerlink" href="#status" title="Link to this heading">#</a></h4>
<p>Access with: <code class="docutils literal notranslate"><span class="pre">my_goal_handle</span></code>.status</p>
<p><code class="docutils literal notranslate"><span class="pre">status</span></code>. Status tells you important information about the progress of your goal. The valid states are:</p>
<ol class="arabic simple" start="0">
<li><p>Unknown (STATUS_UNKNOWN): This is not a valid state. If you encounter this, something has gone wrong.</p></li>
<li><p>Accepted (STATUS_ACCEPTED): The action server has acknowledged your request to do something, and will start executing it when it can.</p></li>
<li><p>Executing (STATUS_EXECUTING): The action server is currently executing your request, but has not yet finished.</p></li>
<li><p>Canceling (STATUS_CANCELING): You, the client, have requested that your request be canceled. The server is canceling your request, but has not yet finished.</p></li>
<li><p>Succeeded (STATUS_SUCCEEDED): The action server has already completed your request, and is doing something else.</p></li>
<li><p>Canceled (STATUS_CANCELED): You, the client, have requested that your request be canceled. The server has already canceled your request, and is doing something else.</p></li>
<li><p>Aborted (STATUS_ABORTED): Something went wrong, and the server stopped executing your goal and will not finish. Unlike canceling, you did <em>not</em> ask the server to stop executing the goal.</p></li>
</ol>
<p><code class="docutils literal notranslate"><span class="pre">status</span></code> is an integer, and can be from 0-6. The numbers in the above states correspond to what they mean, but you should use the constants defined in <code class="docutils literal notranslate"><span class="pre">rclpy</span></code>. For example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">rclpy.action.client</span><span class="w"> </span><span class="kn">import</span> <span class="n">Goal</span>

<span class="c1"># ...</span>

<span class="k">if</span> <span class="n">my_goal_handle</span><span class="o">.</span><span class="n">status</span> <span class="o">==</span> <span class="n">GoalStatus</span><span class="o">.</span><span class="n">STATUS_SUCCEEDED</span><span class="p">:</span>
    <span class="k">pass</span> <span class="c1"># Do something!</span>
</pre></div>
</div>
</section>
<section id="get-result">
<h4><span class="section-number">5.10.3.2.2. </span>Get Result<a class="headerlink" href="#get-result" title="Link to this heading">#</a></h4>
<p>Access with <code class="docutils literal notranslate"><span class="pre">my_goal_handle.get_result()</span></code> or <code class="docutils literal notranslate"><span class="pre">my_goal_handle.get_result_async()</span></code>. For reasons discussed <a class="reference internal" href="#asynchronous-programming"><span class="xref myst">before</span></a> you should almost always use <code class="docutils literal notranslate"><span class="pre">my_goal_handle.get_result_async()</span></code>.</p>
<p>Calling <code class="docutils literal notranslate"><span class="pre">get_result()</span></code> will stop the node from doing anything until the action completes, and then will return the final result, just like calling <code class="docutils literal notranslate"><span class="pre">result</span></code> on a <code class="docutils literal notranslate"><span class="pre">Future</span></code>.</p>
<p>Calling <code class="docutils literal notranslate"><span class="pre">get_result_async()</span></code> will return a future. This means that, over the course of an action call, you will deal with 2 futures: On <code class="docutils literal notranslate"><span class="pre">send_goal_async</span></code> which finishes when the action server accepts the request, and on <code class="docutils literal notranslate"><span class="pre">get_result_async</span></code> which finishes when the action server finishes the action. Don’t get confused, the future returned by <code class="docutils literal notranslate"><span class="pre">send_goal_async</span></code> won’t tell you nearly enough information about the status of your goal! The result of this new future will be the final ROS2 result message from the server.</p>
</section>
<section id="cancel-goal">
<h4><span class="section-number">5.10.3.2.3. </span>Cancel Goal<a class="headerlink" href="#cancel-goal" title="Link to this heading">#</a></h4>
<p>Access with <code class="docutils literal notranslate"><span class="pre">my_goal_handle.cancel_goal()</span></code> or <code class="docutils literal notranslate"><span class="pre">my_goal_handle.cancel_goal_async()</span></code>. Prefer the async version of the method.</p>
<p>Canceling the goal will cause the action server to stop executing the goal the client asked it to execute. This will result in the <code class="docutils literal notranslate"><span class="pre">canceling</span></code> or <code class="docutils literal notranslate"><span class="pre">canceled</span></code> status.</p>
</section>
</section>
<section id="feedback">
<h3><span class="section-number">5.10.3.3. </span>Feedback<a class="headerlink" href="#feedback" title="Link to this heading">#</a></h3>
<p>The main advantage actions have over services is their ability to send a stream of feedback while the server is executing the goal. You can define a feedback with <code class="docutils literal notranslate"><span class="pre">send_goal_async()</span></code>, but not with <code class="docutils literal notranslate"><span class="pre">send_goal()</span></code>. That’s because if you use the synchronous method <code class="docutils literal notranslate"><span class="pre">send_goal()</span></code>, your node can’t do anything else until the goal has finished, including process any feedback!</p>
<p>You can define a function to process feedback as soon as it arrives by specifying the feedback function as the second parameter to <code class="docutils literal notranslate"><span class="pre">send_goal_async</span></code>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">feedback_callback</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">feedback_msg</span><span class="p">):</span>
    <span class="n">feedback</span> <span class="o">=</span> <span class="n">feedback_msg</span><span class="o">.</span><span class="n">feedback</span> <span class="c1"># Take the feedback out of the message! This property is always called `feedback`.</span>
    <span class="n">do_something</span><span class="p">(</span><span class="n">feedback</span><span class="o">.</span><span class="n">result_field</span><span class="p">)</span> <span class="c1"># Use the result! The name of `result_field` is whatever the actual message result property is called.</span>

<span class="n">send_goal_async</span><span class="p">(</span><span class="n">goal</span><span class="p">,</span> <span class="n">feedback_callback</span><span class="p">)</span>
</pre></div>
</div>
<!-- TODO The Above function should be made more applicable, and pulled from an example. I didn't have an example on hand. -->
<p>Now, whenever the server sends feedback, the feedback_callback will be run and it will process the feedback immediately.</p>
</section>
</section>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="review-quiz">
<h1><span class="section-number">5.11. </span>Review Quiz<a class="headerlink" href="#review-quiz" title="Link to this heading">#</a></h1>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<div class="output text_html"><div id="QHMmOoJjWvcC" data-shufflequestions="False"
               data-shuffleanswers="True"
               data-preserveresponses="false"
               data-numquestions="1000000"
               data-maxwidth="600"
               style="border-radius: 10px; text-align: left"> <style>
#QHMmOoJjWvcC {
   --jq-multiple-choice-bg: #345995;
   --jq-mc-button-bg: #fafafa;
   --jq-mc-button-border: #e0e0e0e0;
   --jq-mc-button-inset-shadow: #555555;
   --jq-many-choice-bg: #e26d5a;
   --jq-numeric-bg: #5bc0eb;
   --jq-numeric-input-bg: #c0c0c0;
   --jq-numeric-input-label: #101010;
   --jq-numeric-input-shadow: #999999;
   --jq-incorrect-color: #666666;
   --jq-correct-color: #87a878;
   --jq-text-color: #fafafa;
}

.Quiz {
    max-width: 600px;
    margin-top: 15px;
    margin-left: auto;
    margin-right: auto;
/*    margin-bottom: 15px;*/
/*    padding-bottom: 4px;*/
    padding-top: 4px;
    line-height: 1.1;
    font-size: 16pt;
    border-radius: inherit;
}

.QuizCode {
    font-size: 14pt;
    margin-top: 10px;
    margin-left: 20px;
    margin-right: 20px;
}

.QuizCode>pre {
    padding: 4px;
}

.Quiz code {
    background-color: lightgray;
    color: black;
}

.Quiz .QuizCode code {
    background-color: inherit;
    color: inherit;
}


.Quiz .MCButton code {
    background-color: inherit;
    color: inherit;
}

.MCButton .QuizCode {
    text-align: left;
}




.Answer {
    border-radius: inherit;
    display: grid;
    grid-gap: 10px;
    grid-template-columns: 1fr 1fr;
    margin: 10px 0;
}

@media only screen and (max-width:480px) {
    .Answer {
        grid-template-columns: 1fr;
    }

}

.Feedback {
    font-size: 16pt;
    text-align: center;
/*    min-height: 2em;*/
}

.Input {
    align: left;
    font-size: 20pt;
}

.Input-text {
    display: block;
    margin: 10px;
    color: inherit;
    width: 140px;
    background-color: var(--jq-numeric-input-bg);
    color: var(--jq-text-color);
    padding: 5px;
    padding-left: 10px;
    font-family: inherit;
    font-size: 20px;
    font-weight: inherit;
    line-height: 20pt;
    border: none;
    border-radius: 0.2rem;
    transition: box-shadow 0.1s);
}

.Input-text:focus {
    /*outline: none;*/
    background-color: var(--jq-numeric-input-bg);
    box-shadow: 0.6rem 0.8rem 1.4rem -0.5rem var(--jq-numeric-input-shadow);
}

.MCButton {
    background: var(--jq-mc-button-bg);
    border: 1px solid var(--jq-mc-button-border);
    border-radius: inherit;
    color: #333333;
    padding: 10px;
    font-size: 16px;
    cursor: pointer;
    text-align: center;
    display: flex;
    align-items: center;
    justify-content: center;
}

.MCButton p {
    color: inherit;
}

.MultipleChoiceQn {
    padding: 10px;
    background: var(--jq-multiple-choice-bg);
    color: var(--jq-text-color);
    border-radius: inherit;
}

.ManyChoiceQn {
    padding: 10px;
    background: var(--jq-many-choice-bg);
    color: var(--jq-text-color);
    border-radius: inherit;
}

.NumericQn {
    background: var(--jq-numeric-bg);
    border-radius: inherit;
    color: var(--jq-text-color);
    padding: 10px;
}

.NumericQn p {
    color: inherit;
}

.InpLabel {
    color: var(--jq-numeric-input-label);
    float: left;
    font-size: 15pt;
    line-height: 34px;
    margin-right: 10px;
}

.incorrect {
    color: var(--jq-incorrect-color);
}

.correct {
    color: var(--jq-correct-color);
}

.correctButton {
    /*
    background: var(--jq-correct-color);
   */
    animation: correct-anim 0.6s ease;
    animation-fill-mode: forwards;
    box-shadow: inset 0 0 5px var(--jq-mc-button-inset-shadow);
    color: var(--jq-text-color);
    /*outline: none;*/
}

.incorrectButton {
    animation: incorrect-anim 0.8s ease;
    animation-fill-mode: forwards;
    box-shadow: inset 0 0 5px var(--jq-mc-button-inset-shadow);
    color: var(--jq-text-color);
    /*outline: none;*/
}

@keyframes incorrect-anim {
    100% {
        background-color: var(--jq-incorrect-color);
    }
}

@keyframes correct-anim {
    100% {
        background-color: var(--jq-correct-color);
    }
}
</style></div><script type="application/javascript">var questionsQHMmOoJjWvcC=[    
	{
		"question": "For what type of event should actions (A), services (S), and topics (T) be used?",
		"type": "multiple_choice",
		"answers": [
			{
				"answer": "A: Requested, not instantaneous",
				"correct": true,
			},
			{
				"answer": "S: Requested, instantaneous",
				"correct": true,
			},
			{
				"answer": "T: Not requested, continuous",
				"correct": true,
			},
			{
				"answer": "A: Not requested, instantaneous",
				"correct": false,
				"feedback": "Incorrect."
			},
			{
				"answer": "S: Requested, not instantaneous",
				"correct": false,
				"feedback": "Incorrect."
			},
			{
				"answer": "T: Requested, continuous",
				"correct": false,
				"feedback": "Incorrect."
			}
		]
	},
	{
		"question": "What is the main difference between a synchronous call and an asynchronous call in ROS2?",
		"type": "multiple_choice",
		"answers": [
			{
				"answer": "A synchronous call blocks the program until a response is received.",
				"correct": true,
			},
			{
				"answer": "An asynchronous call blocks the program until a response is received.",
				"correct": false,
				"feedback": "Incorrect."
			},
			{
				"answer": "A synchronous call allows the program to continue executing other tasks while waiting for a response.",
				"correct": false,
				"feedback": "Incorrect."
			},
			{
				"answer": "An asynchronous call can only be used with services, not actions.",
				"correct": false,
				"feedback": "Incorrect."
			}
		]
	},
	{
		"question": "What is a Future in ROS2, and how does it help handle asynchronous operations?",
		"type": "multiple_choice",
		"answers": [
			{
				"answer": "It allows checking the status of a task without blocking the program's execution.",
				"correct": true,
			},
			{
				"answer": "It immediately provides the result of an operation.",
				"correct": false,
				"feedback": "Incorrect."
			},
			{
				"answer": "It blocks the program until a task completes and returns the result.",
				"correct": false,
				"feedback": "Incorrect."
			},
			{
				"answer": "It is used to cancel the execution of an asynchronous task.",
				"correct": false,
				"feedback": "Incorrect."
			}
		]
	},
	{
		"question": "What are the 4 stages of action execution in ROS2?",
		"type": "multiple_choice",
		"answers": [
			{
				"answer": "Request, Accepted, Executing, Finished",
				"correct": true,
			},
			{
				"answer": "GoalReceived, InProgress, Done, ResultReturned",
				"correct": false,
				"feedback": "Incorrect."
			},
			{
				"answer": "Request, Acknowledgment, Executing, Completion",
				"correct": false,
				"feedback": "Incorrect."
			},
			{
				"answer": "Request, Processing, Feedback, Completion",
				"correct": false,
				"feedback": "Incorrect."
			}
		]
	},
	{
		"question": "Why is feedback important in action calls?",
		"type": "multiple_choice",
		"answers": [
			{
				"answer": "Feedback is used to update the client on the progress of the action during execution.",
				"correct": true,
			},
			{
				"answer": "Feedback is only used to confirm when the action has been successfully completed.",
				"correct": false,
				"feedback": "Incorrect."
			},
			{
				"answer": "Feedback is used for error handling during the execution of a service, not an action.",
				"correct": false,
				"feedback": "Incorrect."
			},
			{
				"answer": "Feedback is optional and not necessary for any action to complete.",
				"correct": false,
				"feedback": "Incorrect."
			}
		]
	}
];
    // Make a random ID
function makeid(length) {
    var result = [];
    var characters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz';
    var charactersLength = characters.length;
    for (var i = 0; i < length; i++) {
        result.push(characters.charAt(Math.floor(Math.random() * charactersLength)));
    }
    return result.join('');
}

// Choose a random subset of an array. Can also be used to shuffle the array
function getRandomSubarray(arr, size) {
    var shuffled = arr.slice(0), i = arr.length, temp, index;
    while (i--) {
        index = Math.floor((i + 1) * Math.random());
        temp = shuffled[index];
        shuffled[index] = shuffled[i];
        shuffled[i] = temp;
    }
    return shuffled.slice(0, size);
}

function printResponses(responsesContainer) {
    var responses=JSON.parse(responsesContainer.dataset.responses);
    var stringResponses='<B>IMPORTANT!</B>To preserve this answer sequence for submission, when you have finalized your answers: <ol> <li> Copy the text in this cell below "Answer String"</li> <li> Double click on the cell directly below the Answer String, labeled "Replace Me"</li> <li> Select the whole "Replace Me" text</li> <li> Paste in your answer string and press shift-Enter.</li><li>Save the notebook using the save icon or File->Save Notebook menu item</li></ul><br><br><br><b>Answer String:</b><br> ';
    console.log(responses);
    responses.forEach((response, index) => {
        if (response) {
            console.log(index + ': ' + response);
            stringResponses+= index + ': ' + response +"<BR>";
        }
    });
    responsesContainer.innerHTML=stringResponses;
}
/* Callback function to determine whether a selected multiple-choice
   button corresponded to a correct answer and to provide feedback
   based on the answer */
function check_mc() {
    var id = this.id.split('-')[0];
    //var response = this.id.split('-')[1];
    //console.log(response);
    //console.log("In check_mc(), id="+id);
    //console.log(event.srcElement.id)           
    //console.log(event.srcElement.dataset.correct)   
    //console.log(event.srcElement.dataset.feedback)

    var label = event.srcElement;
    //console.log(label, label.nodeName);
    var depth = 0;
    while ((label.nodeName != "LABEL") && (depth < 20)) {
        label = label.parentElement;
        console.log(depth, label);
        depth++;
    }



    var answers = label.parentElement.children;
    //console.log(answers);

    // Split behavior based on multiple choice vs many choice:
    var fb = document.getElementById("fb" + id);



    /* Multiple choice (1 answer). Allow for 0 correct
       answers as an edge case */
    if (fb.dataset.numcorrect <= 1) {
        // What follows is for the saved responses stuff
        var outerContainer = fb.parentElement.parentElement;
        var responsesContainer = document.getElementById("responses" + outerContainer.id);
        if (responsesContainer) {
            //console.log(responsesContainer);
            var response = label.firstChild.innerText;
            if (label.querySelector(".QuizCode")){
                response+= label.querySelector(".QuizCode").firstChild.innerText;
            }
            console.log(response);
            //console.log(document.getElementById("quizWrap"+id));
            var qnum = document.getElementById("quizWrap"+id).dataset.qnum;
            console.log("Question " + qnum);
            //console.log(id, ", got numcorrect=",fb.dataset.numcorrect);
            var responses=JSON.parse(responsesContainer.dataset.responses);
            console.log(responses);
            responses[qnum]= response;
            responsesContainer.setAttribute('data-responses', JSON.stringify(responses));
            printResponses(responsesContainer);
        }
        // End code to preserve responses

        for (var i = 0; i < answers.length; i++) {
            var child = answers[i];
            //console.log(child);
            child.className = "MCButton";
        }



        if (label.dataset.correct == "true") {
            // console.log("Correct action");
            if ("feedback" in label.dataset) {
                fb.innerHTML = jaxify(label.dataset.feedback);
            } else {
                fb.innerHTML = "Correct!";
            }
            label.classList.add("correctButton");

            fb.className = "Feedback";
            fb.classList.add("correct");

        } else {
            if ("feedback" in label.dataset) {
                fb.innerHTML = jaxify(label.dataset.feedback);
            } else {
                fb.innerHTML = "Incorrect -- try again.";
            }
            //console.log("Error action");
            label.classList.add("incorrectButton");
            fb.className = "Feedback";
            fb.classList.add("incorrect");
        }
    }
    else { /* Many choice (more than 1 correct answer) */
        var reset = false;
        var feedback;
         if (label.dataset.correct == "true") {
            if ("feedback" in label.dataset) {
                feedback = jaxify(label.dataset.feedback);
            } else {
                feedback = "Correct!";
            }
            if (label.dataset.answered <= 0) {
                if (fb.dataset.answeredcorrect < 0) {
                    fb.dataset.answeredcorrect = 1;
                    reset = true;
                } else {
                    fb.dataset.answeredcorrect++;
                }
                if (reset) {
                    for (var i = 0; i < answers.length; i++) {
                        var child = answers[i];
                        child.className = "MCButton";
                        child.dataset.answered = 0;
                    }
                }
                label.classList.add("correctButton");
                label.dataset.answered = 1;
                fb.className = "Feedback";
                fb.classList.add("correct");

            }
        } else {
            if ("feedback" in label.dataset) {
                feedback = jaxify(label.dataset.feedback);
            } else {
                feedback = "Incorrect -- try again.";
            }
            if (fb.dataset.answeredcorrect > 0) {
                fb.dataset.answeredcorrect = -1;
                reset = true;
            } else {
                fb.dataset.answeredcorrect--;
            }

            if (reset) {
                for (var i = 0; i < answers.length; i++) {
                    var child = answers[i];
                    child.className = "MCButton";
                    child.dataset.answered = 0;
                }
            }
            label.classList.add("incorrectButton");
            fb.className = "Feedback";
            fb.classList.add("incorrect");
        }
        // What follows is for the saved responses stuff
        var outerContainer = fb.parentElement.parentElement;
        var responsesContainer = document.getElementById("responses" + outerContainer.id);
        if (responsesContainer) {
            //console.log(responsesContainer);
            var response = label.firstChild.innerText;
            if (label.querySelector(".QuizCode")){
                response+= label.querySelector(".QuizCode").firstChild.innerText;
            }
            console.log(response);
            //console.log(document.getElementById("quizWrap"+id));
            var qnum = document.getElementById("quizWrap"+id).dataset.qnum;
            console.log("Question " + qnum);
            //console.log(id, ", got numcorrect=",fb.dataset.numcorrect);
            var responses=JSON.parse(responsesContainer.dataset.responses);
            if (label.dataset.correct == "true") {
                if (typeof(responses[qnum]) == "object"){
                    if (!responses[qnum].includes(response))
                        responses[qnum].push(response);
                } else{
                    responses[qnum]= [ response ];
                }
            } else {
                responses[qnum]= response;
            }
            console.log(responses);
            responsesContainer.setAttribute('data-responses', JSON.stringify(responses));
            printResponses(responsesContainer);
        }
        // End save responses stuff



        var numcorrect = fb.dataset.numcorrect;
        var answeredcorrect = fb.dataset.answeredcorrect;
        if (answeredcorrect >= 0) {
            fb.innerHTML = feedback + " [" + answeredcorrect + "/" + numcorrect + "]";
        } else {
            fb.innerHTML = feedback + " [" + 0 + "/" + numcorrect + "]";
        }


    }

    if (typeof MathJax != 'undefined') {
        var version = MathJax.version;
        console.log('MathJax version', version);
        if (version[0] == "2") {
            MathJax.Hub.Queue(["Typeset", MathJax.Hub]);
        } else if (version[0] == "3") {
            MathJax.typeset([fb]);
        }
    } else {
        console.log('MathJax not detected');
    }

}


/* Function to produce the HTML buttons for a multiple choice/
   many choice question  and to update the CSS tags based on
   the question type */
function make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id) {

    var shuffled;
    if (shuffle_answers == "True") {
        //console.log(shuffle_answers+" read as true");
        shuffled = getRandomSubarray(qa.answers, qa.answers.length);
    } else {
        //console.log(shuffle_answers+" read as false");
        shuffled = qa.answers;
    }


    var num_correct = 0;

    shuffled.forEach((item, index, ans_array) => {
        //console.log(answer);

        // Make input element
        var inp = document.createElement("input");
        inp.type = "radio";
        inp.id = "quizo" + id + index;
        inp.style = "display:none;";
        aDiv.append(inp);

        //Make label for input element
        var lab = document.createElement("label");
        lab.className = "MCButton";
        lab.id = id + '-' + index;
        lab.onclick = check_mc;
        var aSpan = document.createElement('span');
        aSpan.classsName = "";
        //qDiv.id="quizQn"+id+index;
        if ("answer" in item) {
            aSpan.innerHTML = jaxify(item.answer);
            //aSpan.innerHTML=item.answer;
        }
        lab.append(aSpan);

        // Create div for code inside question
        var codeSpan;
        if ("code" in item) {
            codeSpan = document.createElement('span');
            codeSpan.id = "code" + id + index;
            codeSpan.className = "QuizCode";
            var codePre = document.createElement('pre');
            codeSpan.append(codePre);
            var codeCode = document.createElement('code');
            codePre.append(codeCode);
            codeCode.innerHTML = item.code;
            lab.append(codeSpan);
            //console.log(codeSpan);
        }

        //lab.textContent=item.answer;

        // Set the data attributes for the answer
        lab.setAttribute('data-correct', item.correct);
        if (item.correct) {
            num_correct++;
        }
        if ("feedback" in item) {
            lab.setAttribute('data-feedback', item.feedback);
        }
        lab.setAttribute('data-answered', 0);

        aDiv.append(lab);

    });

    if (num_correct > 1) {
        outerqDiv.className = "ManyChoiceQn";
    } else {
        outerqDiv.className = "MultipleChoiceQn";
    }

    return num_correct;

}
function check_numeric(ths, event) {

    if (event.keyCode === 13) {
        ths.blur();

        var id = ths.id.split('-')[0];

        var submission = ths.value;
        if (submission.indexOf('/') != -1) {
            var sub_parts = submission.split('/');
            //console.log(sub_parts);
            submission = sub_parts[0] / sub_parts[1];
        }
        //console.log("Reader entered", submission);

        if ("precision" in ths.dataset) {
            var precision = ths.dataset.precision;
            submission = Number(Number(submission).toPrecision(precision));
        }


        //console.log("In check_numeric(), id="+id);
        //console.log(event.srcElement.id)           
        //console.log(event.srcElement.dataset.feedback)

        var fb = document.getElementById("fb" + id);
        fb.style.display = "none";
        fb.innerHTML = "Incorrect -- try again.";

        var answers = JSON.parse(ths.dataset.answers);
        //console.log(answers);

        var defaultFB = "Incorrect. Try again.";
        var correct;
        var done = false;
        answers.every(answer => {
            //console.log(answer.type);

            correct = false;
            // if (answer.type=="value"){
            if ('value' in answer) {
                if (submission == answer.value) {
                    if ("feedback" in answer) {
                        fb.innerHTML = jaxify(answer.feedback);
                    } else {
                        fb.innerHTML = jaxify("Correct");
                    }
                    correct = answer.correct;
                    //console.log(answer.correct);
                    done = true;
                }
                // } else if (answer.type=="range") {
            } else if ('range' in answer) {
                console.log(answer.range);
                console.log(submission, submission >=answer.range[0], submission < answer.range[1])
                if ((submission >= answer.range[0]) && (submission < answer.range[1])) {
                    fb.innerHTML = jaxify(answer.feedback);
                    correct = answer.correct;
                    console.log(answer.correct);
                    done = true;
                }
            } else if (answer.type == "default") {
                if ("feedback" in answer) {
                    defaultFB = answer.feedback;
                } 
            }
            if (done) {
                return false; // Break out of loop if this has been marked correct
            } else {
                return true; // Keep looking for case that includes this as a correct answer
            }
        });
        console.log("done:", done);

        if ((!done) && (defaultFB != "")) {
            fb.innerHTML = jaxify(defaultFB);
            //console.log("Default feedback", defaultFB);
        }

        fb.style.display = "block";
        if (correct) {
            ths.className = "Input-text";
            ths.classList.add("correctButton");
            fb.className = "Feedback";
            fb.classList.add("correct");
        } else {
            ths.className = "Input-text";
            ths.classList.add("incorrectButton");
            fb.className = "Feedback";
            fb.classList.add("incorrect");
        }

        // What follows is for the saved responses stuff
        var outerContainer = fb.parentElement.parentElement;
        var responsesContainer = document.getElementById("responses" + outerContainer.id);
        if (responsesContainer) {
            console.log(submission);
            var qnum = document.getElementById("quizWrap"+id).dataset.qnum;
            //console.log("Question " + qnum);
            //console.log(id, ", got numcorrect=",fb.dataset.numcorrect);
            var responses=JSON.parse(responsesContainer.dataset.responses);
            console.log(responses);
            if (submission == ths.value){
                responses[qnum]= submission;
            } else {
                responses[qnum]= ths.value + "(" + submission +")";
            }
            responsesContainer.setAttribute('data-responses', JSON.stringify(responses));
            printResponses(responsesContainer);
        }
        // End code to preserve responses

        if (typeof MathJax != 'undefined') {
            var version = MathJax.version;
            console.log('MathJax version', version);
            if (version[0] == "2") {
                MathJax.Hub.Queue(["Typeset", MathJax.Hub]);
            } else if (version[0] == "3") {
                MathJax.typeset([fb]);
            }
        } else {
            console.log('MathJax not detected');
        }
        return false;
    }

}

function isValid(el, charC) {
    //console.log("Input char: ", charC);
    if (charC == 46) {
        if (el.value.indexOf('.') === -1) {
            return true;
        } else if (el.value.indexOf('/') != -1) {
            var parts = el.value.split('/');
            if (parts[1].indexOf('.') === -1) {
                return true;
            }
        }
        else {
            return false;
        }
    } else if (charC == 47) {
        if (el.value.indexOf('/') === -1) {
            if ((el.value != "") && (el.value != ".")) {
                return true;
            } else {
                return false;
            }
        } else {
            return false;
        }
    } else if (charC == 45) {
        var edex = el.value.indexOf('e');
        if (edex == -1) {
            edex = el.value.indexOf('E');
        }

        if (el.value == "") {
            return true;
        } else if (edex == (el.value.length - 1)) { // If just after e or E
            return true;
        } else {
            return false;
        }
    } else if (charC == 101) { // "e"
        if ((el.value.indexOf('e') === -1) && (el.value.indexOf('E') === -1) && (el.value.indexOf('/') == -1)) {
            // Prev symbol must be digit or decimal point:
            if (el.value.slice(-1).search(/\d/) >= 0) {
                return true;
            } else if (el.value.slice(-1).search(/\./) >= 0) {
                return true;
            } else {
                return false;
            }
        } else {
            return false;
        }
    } else {
        if (charC > 31 && (charC < 48 || charC > 57))
            return false;
    }
    return true;
}

function numeric_keypress(evnt) {
    var charC = (evnt.which) ? evnt.which : evnt.keyCode;

    if (charC == 13) {
        check_numeric(this, evnt);
    } else {
        return isValid(this, charC);
    }
}





function make_numeric(qa, outerqDiv, qDiv, aDiv, id) {



    //console.log(answer);


    outerqDiv.className = "NumericQn";
    aDiv.style.display = 'block';

    var lab = document.createElement("label");
    lab.className = "InpLabel";
    lab.innerHTML = "Type numeric answer here:";
    aDiv.append(lab);

    var inp = document.createElement("input");
    inp.type = "text";
    //inp.id="input-"+id;
    inp.id = id + "-0";
    inp.className = "Input-text";
    inp.setAttribute('data-answers', JSON.stringify(qa.answers));
    if ("precision" in qa) {
        inp.setAttribute('data-precision', qa.precision);
    }
    aDiv.append(inp);
    //console.log(inp);

    //inp.addEventListener("keypress", check_numeric);
    //inp.addEventListener("keypress", numeric_keypress);
    /*
    inp.addEventListener("keypress", function(event) {
        return numeric_keypress(this, event);
    }
                        );
                        */
    //inp.onkeypress="return numeric_keypress(this, event)";
    inp.onkeypress = numeric_keypress;
    inp.onpaste = event => false;

    inp.addEventListener("focus", function (event) {
        this.value = "";
        return false;
    }
    );


}
function jaxify(string) {
    var mystring = string;

    var count = 0;
    var loc = mystring.search(/([^\\]|^)(\$)/);

    var count2 = 0;
    var loc2 = mystring.search(/([^\\]|^)(\$\$)/);

    //console.log(loc);

    while ((loc >= 0) || (loc2 >= 0)) {

        /* Have to replace all the double $$ first with current implementation */
        if (loc2 >= 0) {
            if (count2 % 2 == 0) {
                mystring = mystring.replace(/([^\\]|^)(\$\$)/, "$1\\[");
            } else {
                mystring = mystring.replace(/([^\\]|^)(\$\$)/, "$1\\]");
            }
            count2++;
        } else {
            if (count % 2 == 0) {
                mystring = mystring.replace(/([^\\]|^)(\$)/, "$1\\(");
            } else {
                mystring = mystring.replace(/([^\\]|^)(\$)/, "$1\\)");
            }
            count++;
        }
        loc = mystring.search(/([^\\]|^)(\$)/);
        loc2 = mystring.search(/([^\\]|^)(\$\$)/);
        //console.log(mystring,", loc:",loc,", loc2:",loc2);
    }

    // repace markdown style links with actual links
    mystring = mystring.replace(/<(.*?)>/, '<a href="$1" target="_blank" class="Link">$1</a>');
    mystring = mystring.replace(/\[(.*?)\]\((.*?)\)/, '<a href="$2" target="_blank" class="Link">$1</a>');

    //console.log(mystring);
    return mystring;
}


function show_questions(json, mydiv) {
    console.log('show_questions');
    //var mydiv=document.getElementById(myid);
    var shuffle_questions = mydiv.dataset.shufflequestions;
    var num_questions = mydiv.dataset.numquestions;
    var shuffle_answers = mydiv.dataset.shuffleanswers;
    var max_width = mydiv.dataset.maxwidth;

    if (num_questions > json.length) {
        num_questions = json.length;
    }

    var questions;
    if ((num_questions < json.length) || (shuffle_questions == "True")) {
        //console.log(num_questions+","+json.length);
        questions = getRandomSubarray(json, num_questions);
    } else {
        questions = json;
    }

    //console.log("SQ: "+shuffle_questions+", NQ: " + num_questions + ", SA: ", shuffle_answers);

    // Iterate over questions
    questions.forEach((qa, index, array) => {
        //console.log(qa.question); 

        var id = makeid(8);
        //console.log(id);


        // Create Div to contain question and answers
        var iDiv = document.createElement('div');
        //iDiv.id = 'quizWrap' + id + index;
        iDiv.id = 'quizWrap' + id;
        iDiv.className = 'Quiz';
        iDiv.setAttribute('data-qnum', index);
        iDiv.style.maxWidth  =max_width+"px";
        mydiv.appendChild(iDiv);
        // iDiv.innerHTML=qa.question;
        
        var outerqDiv = document.createElement('div');
        outerqDiv.id = "OuterquizQn" + id + index;
        // Create div to contain question part
        var qDiv = document.createElement('div');
        qDiv.id = "quizQn" + id + index;
        
        if (qa.question) {
            iDiv.append(outerqDiv);

            //qDiv.textContent=qa.question;
            qDiv.innerHTML = jaxify(qa.question);
            outerqDiv.append(qDiv);
        }

        // Create div for code inside question
        var codeDiv;
        if ("code" in qa) {
            codeDiv = document.createElement('div');
            codeDiv.id = "code" + id + index;
            codeDiv.className = "QuizCode";
            var codePre = document.createElement('pre');
            codeDiv.append(codePre);
            var codeCode = document.createElement('code');
            codePre.append(codeCode);
            codeCode.innerHTML = qa.code;
            outerqDiv.append(codeDiv);
            //console.log(codeDiv);
        }


        // Create div to contain answer part
        var aDiv = document.createElement('div');
        aDiv.id = "quizAns" + id + index;
        aDiv.className = 'Answer';
        iDiv.append(aDiv);

        //console.log(qa.type);

        var num_correct;
        if ((qa.type == "multiple_choice") || (qa.type == "many_choice") ) {
            num_correct = make_mc(qa, shuffle_answers, outerqDiv, qDiv, aDiv, id);
            if ("answer_cols" in qa) {
                //aDiv.style.gridTemplateColumns = 'auto '.repeat(qa.answer_cols);
                aDiv.style.gridTemplateColumns = 'repeat(' + qa.answer_cols + ', 1fr)';
            }
        } else if (qa.type == "numeric") {
            //console.log("numeric");
            make_numeric(qa, outerqDiv, qDiv, aDiv, id);
        }


        //Make div for feedback
        var fb = document.createElement("div");
        fb.id = "fb" + id;
        //fb.style="font-size: 20px;text-align:center;";
        fb.className = "Feedback";
        fb.setAttribute("data-answeredcorrect", 0);
        fb.setAttribute("data-numcorrect", num_correct);
        iDiv.append(fb);


    });
    var preserveResponses = mydiv.dataset.preserveresponses;
    console.log(preserveResponses);
    console.log(preserveResponses == "true");
    if (preserveResponses == "true") {
        console.log(preserveResponses);
        // Create Div to contain record of answers
        var iDiv = document.createElement('div');
        iDiv.id = 'responses' + mydiv.id;
        iDiv.className = 'JCResponses';
        // Create a place to store responses as an empty array
        iDiv.setAttribute('data-responses', '[]');

        // Dummy Text
        iDiv.innerHTML="<b>Select your answers and then follow the directions that will appear here.</b>"
        //iDiv.className = 'Quiz';
        mydiv.appendChild(iDiv);
    }
//console.log("At end of show_questions");
    if (typeof MathJax != 'undefined') {
        console.log("MathJax version", MathJax.version);
        var version = MathJax.version;
        setTimeout(function(){
            var version = MathJax.version;
            console.log('After sleep, MathJax version', version);
            if (version[0] == "2") {
                MathJax.Hub.Queue(["Typeset", MathJax.Hub]);
            } else if (version[0] == "3") {
                if (MathJax.hasOwnProperty('typeset') ) {
                    MathJax.typeset([mydiv]);
                } else {
                    console.log('WARNING: Trying to force load MathJax 3');
                    window.MathJax = {
                        tex: {
                            inlineMath: [['$', '$'], ['\\(', '\\)']]
                        },
                        svg: {
                            fontCache: 'global'
                        }
                    };

                    (function () {
                        var script = document.createElement('script');
                        script.src = 'https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js';
                        script.async = true;
                        document.head.appendChild(script);
                    })();
                }
            }
        }, 500);
if (typeof version == 'undefined') {
        } else
        {
            if (version[0] == "2") {
                MathJax.Hub.Queue(["Typeset", MathJax.Hub]);
            } else if (version[0] == "3") {
                if (MathJax.hasOwnProperty('typeset') ) {
                    MathJax.typeset([mydiv]);
                } else {
                    console.log('WARNING: Trying to force load MathJax 3');
                    window.MathJax = {
                        tex: {
                            inlineMath: [['$', '$'], ['\\(', '\\)']]
                        },
                        svg: {
                            fontCache: 'global'
                        }
                    };

                    (function () {
                        var script = document.createElement('script');
                        script.src = 'https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js';
                        script.async = true;
                        document.head.appendChild(script);
                    })();
                }
            } else {
                console.log("MathJax not found");
            }
        }
    }

    // stop event propagation for the .Link class
    var links = document.getElementsByClassName('Link')
    for (var i = 0; i < links.length; i++) {
        links[i].addEventListener('click', function(e){
            e.stopPropagation();
        });
    }

    return false;
}
/* This is to handle asynchrony issues in loading Jupyter notebooks
           where the quiz has been previously run. The Javascript was generally
           being run before the div was added to the DOM. I tried to do this
           more elegantly using Mutation Observer, but I didn't get it to work.

           Someone more knowledgeable could make this better ;-) */

        function try_show() {
          if(document.getElementById("QHMmOoJjWvcC")) {
            show_questions(questionsQHMmOoJjWvcC,  QHMmOoJjWvcC); 
          } else {
             setTimeout(try_show, 200);
          }
        };
    
        {
        // console.log(element);

        //console.log("QHMmOoJjWvcC");
        // console.log(document.getElementById("QHMmOoJjWvcC"));

        try_show();
        }
        </script></div>
</div>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./book/CHAPTERS/ROS2_Iron/06_Writing_ROS2_Nodes"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="Services.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title"><span class="section-number">5.7. </span>Services</p>
      </div>
    </a>
    <a class="right-next"
       href="../07_Launch_Files/Launch_Files.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title"><span class="section-number">6. </span>Launch Files</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#">5.10. Actions</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#topics-vs-services-vs-actions">5.10.1. Topics vs Services vs Actions</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#asynchronous-programming">5.10.2. Asynchronous Programming</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#async-methods">5.10.2.1. Async Methods</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#futures">5.10.2.2. Futures</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#programming-with-client-actions">5.10.3. Programming with Client Actions</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#send-goal">5.10.3.1. Send Goal</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#goal-handles">5.10.3.2. Goal Handles</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#status">5.10.3.2.1. Status</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#get-result">5.10.3.2.2. Get Result</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#cancel-goal">5.10.3.2.3. Cancel Goal</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#feedback">5.10.3.3. Feedback</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#review-quiz">5.11. Review Quiz</a></li>
</ul>

  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By <br>Advisor - Dr. Kimberly Oakes<br>Semester - RCOS Fall 2024<br>Team - Learn ROS Through Python Turtle<br> Alejandro Begara Criado<br>Luca Vitti<br>Niko Baletin<br>Jeremy Goldberger
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2024.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../../../../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b"></script>
<script src="../../../../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>